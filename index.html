<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" /> 
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <link type="text/css" rel="stylesheet" href="stylesheet.css"/>
        <title>math sprint</title>
    </head>

    <body>
        <div class="math-sprint-example">
            <div class="math-sprint-question">
                <div id="equation">this is where a question should go</div>
                <div id="question"></div>
            </div>
            <form id="answer-submit" action="javascript:console.log()">
                <input id="answer-field" type="text" />
                <input type="submit" value="submit answer" />
            </form>
            <div class="math-sprint-response">
                <div id="user-answer"></div>
                <div id="incorrect-chosen" visibility: hidden></div>
                <div id="correct-chosen" visibility: hidden></div>
                <form id="next-question" action="javascript:console.log()" visibility: hidden>
                    <input id="get-next-question" type="submit" value="next question" />
                </form>
            </div>
        </div>

        <script>

            function generateQuestionAnswerPair() {
                var setNumberX = Math.floor(Math.random() * (21)) - 10;
                var setNumberY = Math.floor(Math.random() * (21)) - 10;
                var setVariable = Math.floor(Math.random() * (26)) + 97;
                var correctAnswer = setNumberY - setNumberX;
                return [correctAnswer, setNumberX, setNumberY, setVariable];
            };

            function displayQuestion() {
                questionAnswerPair = generateQuestionAnswerPair();
                correctAnswer = questionAnswerPair[0];
                questionValueX = questionAnswerPair[1];
                questionValueY = questionAnswerPair[2];
                questionVariable = String.fromCharCode(questionAnswerPair[3]);
                if ( questionValueX > 0 ) {
                    $( "#equation" ).text( questionVariable + " + " + questionValueX + " = " + questionValueY).show();
                }
                else if ( questionValueX < 0 ) {
                    $( "#equation" ).text( questionVariable + " - " + Math.abs(questionValueX) + " = " + questionValueY).show();
                }
                else {
                    $( "#equation" ).text( questionVariable + " = " + questionValueY).show();
                }
                
                $( "#question" ).text( "solve for " + questionVariable ).show();
            };

            displayQuestion();
            
            $( "#answer-submit" ).submit(function () {
                if ( $( "#answer-field" ).val() == correctAnswer ) {
                    $( "#correct-chosen" ).text( correctAnswer + " is the correct answer!").show();
                }
                else {
                   $( "#incorrect-chosen" ).text( $( "#answer-field" ).val() + " is not the correct answer.").show(); 
                   $( "#correct-chosen" ).text( correctAnswer + " is the correct answer.").show();
                }
                $( "#next-question" ).show();
                return;
            });

            $( "#next-question" ).submit(function () {
                $( "#incorrect-chosen" ).fadeOut();
                $( "#correct-chosen" ).fadeOut();
                $( "#answer-field" ).val("");
                $( ".math-sprint-question" ).fadeOut().promise().done(function () {
                    displayQuestion();
                    $( ".math-sprint-question" ).fadeIn();

                });
                $( "#next-question" ).hide();
                return;
            }); 
        </script>
    </body>

</html>
