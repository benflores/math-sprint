<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" /> 
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <link type="text/css" rel="stylesheet" href="stylesheet.css"/>
        <title>math sprint</title>
    </head>

    <body>
        <div class="math-sprint-example">
            <div class="math-sprint-question">
                <div id="equation">this is where a question should go</div>
                <div id="question"></div>
            </div>
            <form id="answer-submit" action="javascript:console.log()">
                <input id="answer-field" type="text" />
                <input type="submit" value="submit answer" />
            </form>
            <div class="math-sprint-response">
                <div id="user-answer"></div>
                <div id="incorrect-chosen" visibility: hidden></div>
                <div id="correct-chosen" visibility: hidden></div>
                <form id="next-question" action="javascript:console.log()" visibility: hidden>
                    <input id="get-next-question" type="submit" value="next question" />
                </form>
            </div>
        </div>

        <script>

            function generateQuestion() {
                var setNumberX = Math.floor(Math.random() * (21)) - 10;
                var setNumberY = Math.floor(Math.random() * (21)) - 10;
                var correctAnswer = setNumberY - setNumberX;
                return [correctAnswer, setNumberX, setNumberY];
            };

            function displayQuestion() {
                var questionAnswerPair = generateQuestion();
                correctAnswer = questionAnswerPair[0];
                var questionValueX = questionAnswerPair[1];
                var questionValueY = questionAnswerPair[2];
                questionVariable = String.fromCharCode(Math.floor(Math.random() * (26)) + 97);
                var expressionOrder = Math.floor(Math.random() * (2)) - 1;
                var equationOrder = Math.floor(Math.random() * (2)) - 1;

                if ( expressionOrder == 1 ) {
                    if ( questionValueX > 0 ) {
                        var expression = questionVariable + " + " + questionValueX
                    }
                    else if ( questionValueX < 0 ) {
                        var expression = questionVariable + " - " + Math.abs(questionValueX)
                    }
                    else {
                        var expression = questionVariable
                    }
                }
                else {
                    if ( questionValueX == 0 ) {
                        var expression = questionVariable
                        
                    }
                    else {
                        var expression = questionValueX + " + " + questionVariable
                    }
                }

                if ( equationOrder == 1 ) {
                    $( "#equation" ).text( expression + " = " + questionValueY).show();
                }

                else {
                    $( "#equation" ).text( questionValueY + " = " + expression).show();
                }

                $( "#question" ).text( "solve for " + questionVariable ).show();
            };

            displayQuestion();
            
            $( "#answer-submit" ).submit(function () {
                if ( $( "#answer-field" ).val() == correctAnswer ) {
                    $( "#correct-chosen" ).text( questionVariable + " = " + correctAnswer + " is the correct answer!").show();
                }
                else {
                   $( "#incorrect-chosen" ).text( questionVariable + " = " + $( "#answer-field" ).val() + " is not the correct answer.").show(); 
                   $( "#correct-chosen" ).text( questionVariable + " = " + correctAnswer + " is the correct answer.").show();
                }
                $( "#next-question" ).show();
                return;
            });

            $( "#next-question" ).submit(function () {
                $( "#incorrect-chosen" ).fadeOut();
                $( "#correct-chosen" ).fadeOut();
                $( "#answer-field" ).val("");
                $( ".math-sprint-question" ).fadeOut().promise().done(function () {
                    displayQuestion();
                    $( ".math-sprint-question" ).fadeIn();

                });
                $( "#next-question" ).hide();
                return;
            }); 
        </script>
    </body>

</html>
